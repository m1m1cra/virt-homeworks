
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

#### Ответ
Полная аппаратная виртуализация - установка гипервизора на голое железо (bare-metal), т.е гипервизор 1 типа. Является наилучшим вариантом для оптимальной работы виртуальных машин, так как ресурсы не требуется делить с хостовой операционной системой и отсутствуют прочие слои абстракции, присущие 2 типу.

Паравиртуализация - добавляется слой абстракции, добавляется хостовая операционная система. Гостевая машина знает, что она запущена на виртуалке. За все ресурсы гостевая машина должна конкурировать с приложениями хостовой ОС, безопасность ВМ также зависит строго от хостовой ОС и т.д 

Виртуализация на уровне ОС -самый распространенный вариант - docker -  в основном испольуется в разработке ПО для быстрой и эффективной сборки ПО с окружением, а также с последующим его деплоем и гарантированным запуском. Таким образом можно избежать ошибок по отсутствуию необходимых бибилиотек, модулей и т.д, которые были в наличии при билде на машине разраба,  но отсутстуют, например, после деплоя на сервер. 


## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

#### Ответ
Высоконагруженная БД - я бы запустил на ESXI или XEN, естественно, bare-metal ввиду почти нативной производительности, с кластеризацией и полностью рабочей теневой репликой, например, по принципу fault tolerance. Вввиду выхода из строя любой ноды, БД работает на другой и простоя нет.

Различные web-приложения - можно вполне запустить bare-metal в  кластере KVM,  или в кубере:)

Windows системы для использования бухгалтерским отделом - Если софт не очень критичный и его ипользует несколько сотрудников в организации, тем более на Windows - вполне можно запустить на Hyper-V непосредственно на сервере (Тип 2 или 1+), но аналогично - можно установить и бесплатный XEN или ESXI и на него установить ОС Win и необходиый софт.

Системы, выполняющие высокопроизводительные расчеты на GPU - подойдет любой тип виртуаилизации, но при выборе 1 типа гипервизора необходимо учесть корректный проброс GPU в гостевую машину, поэтому лучше использовать ESXI или XEN.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

#### Ответ
Такая инфраструктура вполне собирается на базе Hyper-V (создание кластера), если речь про бесплатный софт не стоит - на VSphere с оркестрацией VCenter + Veeam будет жить на ура. 


2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

#### Ответ
Вполне можно ставить Xen или KVM.

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

#### Ответ
Если виртуализироваться будет исключительно Windows-инфраструктура - можно использовать Hyper-V смело. Почти нативная производительность.

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

#### Ответ
Однозначно использовать либо паравиртуализацию (например, Oracle Virtualbox + vagrant с целью быстрого создания окружения) либо докер (виртуализацию уровня ОС)

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

#### Ответ
Наличие гетерогенной среды нежелательно в связи с тем, что как правило, управляются ноды оркестратором, соответственно, все должны быть под управлением одинаковых гипервизоров, аналогично и с бэкапами, api, и т.д
Например, установлено несколько нод VSphere, управляется все через VCenter, архивация Veeam. В случае выхода ноды из строя - машина перетекает на другую ноду. Легко добавить в пул новую ноду, мониторить алармы, мигрировать, бэкапить.
